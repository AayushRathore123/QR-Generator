<div class="page-container">
    <h2>QR Code Generator</h2>
    <p>Select a QR Code type and generate it instantly.</p>

    <div class="toggle-container">
        <label class="switch">
            <input type="checkbox" (change)="toggleQrType($event)" [checked]="isLinkQr">
            <span class="slider">
            </span>
        </label>
        <span class="toggle-label">{{ isLinkQr ? 'Link QR' : 'WiFi QR' }}</span>
    </div>

    <div class="container-wrapper">
        <div class="form-card">
            <form *ngIf="isWifiQr" [formGroup]="wifiForm" (ngSubmit)="generateWifiQR()">
                <h3>WiFi QR Code</h3>
                <div class="form-group">
                    <label for="ssid">SSID</label>
                    <input type="text" id="ssid" class="form-control" formControlName="ssid" placeholder="Enter WiFi Name">
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-control" formControlName="password" placeholder="Enter Password">
                </div>

                <div class="form-group">
                    <label for="authType">Authentication Type</label>
                    <select id="authType" class="form-control" formControlName="authType">
                        <option *ngFor="let auth of authTypes" [value]="auth">{{ auth }}</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary" [disabled]="wifiForm.invalid">Generate QR Code</button>
            </form>

            <form *ngIf="isLinkQr" [formGroup]="linkForm" (ngSubmit)="generateLinkQR()">
                <h3>Link QR Code</h3>
                <div class="form-group">
                    <label for="url">URL</label>
                    <input type="text" id="url" class="form-control" formControlName="url" placeholder="Enter URL">
                </div>
                <button type="submit" class="btn btn-primary" [disabled]="linkForm.invalid">Generate QR Code</button>
            </form>
        </div>

        <div class="qr-display">
            <div *ngIf="wifiString || linkString">
                <qrcode #parent [elementType]="'canvas'" [qrdata]="wifiString || linkString" [width]="256"></qrcode>
                <div class="button-container">
                    <button (click)="downloadQR(parent)" class="btn btn-success">Download</button>
                    <button (click)="saveQR()" class="btn btn-success">Save</button>
                </div>
            </div>
            <div *ngIf="!wifiString && !linkString" class="qr-placeholder">
                <p>No QR Code generated yet</p>
            </div>
        </div>
    </div>
</div>
